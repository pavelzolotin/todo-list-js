(()=>{"use strict";let e=null;function t(t){e=t.value}function n(t){let n=Array.from(JSON.parse(localStorage.getItem("tasks")));if(""===t.value)return alert("Задание не написано"),void(t.value=e);n.forEach((n=>{n.task===e&&(n.task=t.value)})),localStorage.setItem("tasks",JSON.stringify(n))}let a="00",r="00";function s(e){a=e.value}function o(e){r=e.value}function l(e){return""===e.value?(alert("Время не написано"),void(e.value="00")):e.value.length<2||e.value.length>2?(alert("Напишите время, 2 символа"),void(e.value="00")):void 0}function i(e){let t=Array.from(JSON.parse(localStorage.getItem("tasks")));if(l(e),e.value>23)return alert("Время написано некорректно"),void(e.value="00");t.forEach((t=>{t.taskTimeHours===a&&(t.taskTimeHours=e.value)})),localStorage.setItem("tasks",JSON.stringify(t))}function u(e){let t=Array.from(JSON.parse(localStorage.getItem("tasks")));if(l(e),e.value>59)return alert("Время написано некорректно"),void(e.value="00");t.forEach((t=>{t.taskTimeMinutes===r&&(t.taskTimeMinutes=e.value)})),localStorage.setItem("tasks",JSON.stringify(t))}const c=function(e){let t=Array.from(JSON.parse(localStorage.getItem("tasks")));t.forEach((t=>{t.task===e.parentNode.children[0].value&&(t.completed=!t.completed,t.completedWithoutDecoration=!t.completedWithoutDecoration)})),localStorage.setItem("tasks",JSON.stringify(t)),e.parentNode.children[0].classList.toggle("completed"),e.parentNode.children[1].classList.toggle("completed-without-decoration"),e.parentNode.children[3].classList.toggle("completed-without-decoration")},d=function(e){let t=document.querySelector(".btn__delete-all-tasks"),n=Array.from(JSON.parse(localStorage.getItem("tasks")));n.forEach((t=>{t.task===e.parentNode.children[0].value&&n.splice(n.indexOf(t),1)})),localStorage.setItem("tasks",JSON.stringify(n)),e.parentElement.parentElement.remove(),n.length<1&&t.remove()},m=document.querySelector(".container"),v=function(){let e=document.createElement("button");e.classList.add("btn__delete-all-tasks"),e.setAttribute("type","submit"),e.innerHTML="&minus;",m.appendChild(e),e.addEventListener("click",(()=>{localStorage.clear(),location.reload()}))},p=document.querySelector(".task__text-input"),f=document.querySelector(".task__time-input--hours"),g=document.querySelector(".task__time-input--minutes"),k=document.querySelector("ol");let h=document.querySelector("form");const _=function(){h.addEventListener("submit",(e=>{e.preventDefault(),function(){if(""===p.value||p.value.length<5)return void alert("Напишите задание (не меньше 5 символов)");if(""===f.value||f.value.length<2||f.value.length>2)return void alert("Напишите количество часов, 2 символа");if(""===g.value||g.value.length<2||g.value.length>2)return void alert("Напишите количество минут, 2 символа");if(f.value>23)return void alert("Количество часов написано некорректно");if(g.value>59)return void alert("Количество минут написано некорректно");if(document.querySelector(`input[value="${p.value}"]`))return void alert("Такое задание уже существует");localStorage.setItem("tasks",JSON.stringify([...JSON.parse(localStorage.getItem("tasks")||"[]"),{task:p.value,taskTimeHours:f.value,taskTimeMinutes:g.value,completed:!1,completedWithoutDecoration:!1}]));const e=document.createElement("li");e.classList.add("li");const a=document.createElement("div");a.classList.add("task"),a.innerHTML=`<input value="${p.value}" class="task-current__text-input">\n    <input class="task-current__time-input--hours" type="number" min="01" max="24" value="${f.value}">\n    <span>:</span>\n    <input class="task-current__time-input--minutes" type="number" min="00" max="59" value="${g.value}">\n    <button class="btn__task-done"><img src="assets/img/check.png"/></button>\n    <button class="btn__task-delete"><img src="assets/img/delete.png"/></button>`,k.insertBefore(e,k.children[0]),e.insertBefore(a,e.children[0]);const r=document.querySelector(".btn__task-done"),l=document.querySelector(".btn__task-delete"),m=document.querySelector(".task-current__text-input"),h=document.querySelector(".task-current__time-input--hours"),_=document.querySelector(".task-current__time-input--minutes");r.addEventListener("click",(function(){r.classList.toggle("completed"),c(this)})),l.addEventListener("click",(function(){d(this)})),m.addEventListener("focus",(function(){t(this)})),m.addEventListener("blur",(function(){n(this)})),h.addEventListener("focus",(function(){s(this)})),h.addEventListener("blur",(function(){i(this)})),_.addEventListener("focus",(function(){o(this)})),_.addEventListener("blur",(function(){u(this)})),p.value="",f.value="00",g.value="00",1===Array.from(JSON.parse(localStorage.getItem("tasks"))).length&&v()}()}))};window.addEventListener("DOMContentLoaded",(()=>{(function(){if(null===localStorage.getItem("tasks"))return;let e=Array.from(JSON.parse(localStorage.getItem("tasks")));e.length>=1&&(v(),e.forEach((e=>{const a=document.querySelector("ol"),r=document.createElement("li");r.classList.add("li");const l=document.createElement("div");l.classList.add("task"),l.innerHTML=`<input value="${e.task}" class="task-current__text-input ${e.completed?"completed":""}">\n        <input class="task-current__time-input--hours ${e.completedWithoutDecoration?"completed-without-decoration":""}" type="number" min="01" max="24" value="${e.taskTimeHours}">\n        <span>:</span>\n        <input class="task-current__time-input--minutes ${e.completedWithoutDecoration?"completed-without-decoration":""}" type="number" min="00" max="59" value="${e.taskTimeMinutes}">\n        <button class="btn__task-done ${e.completed?"completed":""}"><img src="assets/img/check.png"/></button>\n        <button class="btn__task-delete"><img src="assets/img/delete.png"/></button>`,a.insertBefore(r,a.children[0]),r.insertBefore(l,r.children[0]);const m=document.querySelector(".btn__task-done"),v=document.querySelector(".btn__task-delete"),p=document.querySelector(".task-current__text-input"),f=document.querySelector(".task-current__time-input--hours"),g=document.querySelector(".task-current__time-input--minutes");m.addEventListener("click",(function(){m.classList.toggle("completed"),c(this)})),v.addEventListener("click",(function(){d(this)})),p.addEventListener("focus",(function(){t(this)})),p.addEventListener("blur",(function(){n(this)})),f.addEventListener("focus",(function(){s(this)})),f.addEventListener("blur",(function(){i(this)})),g.addEventListener("focus",(function(){o(this)})),g.addEventListener("blur",(function(){u(this)}))})))})(),_()}))})();