(()=>{"use strict";let e=null;function t(t){e=t.value}function n(t){let n=Array.from(JSON.parse(localStorage.getItem("tasks")));if(""===t.value)return alert("Задание не написано"),void(t.value=e);n.forEach((n=>{n.task===e&&(n.task=t.value)})),localStorage.setItem("tasks",JSON.stringify(n))}let a="00",s="00";function r(e){a=e.value}function l(e){s=e.value}function u(e){let t=Array.from(JSON.parse(localStorage.getItem("tasks")));return""===e.value?(alert("Время не написано"),void(e.value="00")):e.value.length<2||e.value.length>2?(alert("Напишите время, 2 символа"),void(e.value="00")):e.value>23?(alert("Время написано некорректно"),void(e.value="00")):(t.forEach((t=>{t.taskTimeHours===a&&(t.taskTimeHours=e.value)})),void localStorage.setItem("tasks",JSON.stringify(t)))}function i(e){let t=Array.from(JSON.parse(localStorage.getItem("tasks")));return""===e.value?(alert("Время не написано"),void(e.value="00")):e.value.length<2||e.value.length>2?(alert("Напишите время, 2 символа"),void(e.value="00")):e.value>59?(alert("Время написано некорректно"),void(e.value="00")):(t.forEach((t=>{t.taskTimeMinutes===s&&(t.taskTimeMinutes=e.value)})),void localStorage.setItem("tasks",JSON.stringify(t)))}const o=function(e){let t=Array.from(JSON.parse(localStorage.getItem("tasks")));t.forEach((t=>{t.task===e.parentNode.children[0].value&&(t.completed=!t.completed)})),localStorage.setItem("tasks",JSON.stringify(t)),e.parentNode.children[0].classList.toggle("completed"),e.parentNode.children[1].classList.toggle("completed-without-decoration"),e.parentNode.children[3].classList.toggle("completed-without-decoration")},c=function(e){let t=document.querySelector(".btn__delete-all-tasks"),n=Array.from(JSON.parse(localStorage.getItem("tasks")));n.forEach((t=>{t.task===e.parentNode.children[0].value&&n.splice(n.indexOf(t),1)})),localStorage.setItem("tasks",JSON.stringify(n)),e.parentElement.parentElement.remove(),n.length<1&&t.remove()},d=document.querySelector(".container"),m=function(){null!==localStorage.getItem("tasks")&&(function(){if(Array.from(JSON.parse(localStorage.getItem("tasks"))).length>=1){let e=document.createElement("button");e.classList.add("btn__delete-all-tasks"),e.setAttribute("type","submit"),e.innerHTML="&minus;",d.appendChild(e),e.addEventListener("click",(()=>{localStorage.clear(),location.reload()}))}}(),Array.from(JSON.parse(localStorage.getItem("tasks"))).forEach((e=>{const a=document.querySelector("ol"),s=document.createElement("li");s.classList.add("li");const d=document.createElement("div");d.classList.add("task"),d.innerHTML=`<input value="${e.task}" class="task-current__text-input ${e.completed?"completed":""}">\n        <input class="task-current__time-input--hours" type="number" min="01" max="24" value="${e.taskTimeHours}">\n        <span>:</span>\n        <input class="task-current__time-input--minutes" type="number" min="00" max="59" value="${e.taskTimeMinutes}">\n        <button class="btn__task-done ${e.completed?"completed":""}"><img src="assets/img/check.png"/></button>\n        <button class="btn__task-delete"><img src="assets/img/delete.png"/></button>`,a.insertBefore(s,a.children[0]),s.insertBefore(d,s.children[0]);const m=document.querySelector(".btn__task-done"),v=document.querySelector(".btn__task-delete"),f=document.querySelector(".task-current__text-input"),p=document.querySelector(".task-current__time-input--hours"),g=document.querySelector(".task-current__time-input--minutes");m.addEventListener("click",(function(){m.classList.toggle("completed"),o(this)})),v.addEventListener("click",(function(){c(this)})),f.addEventListener("focus",(function(){t(this)})),f.addEventListener("blur",(function(){n(this)})),p.addEventListener("focus",(function(){r(this)})),p.addEventListener("blur",(function(){u(this)})),g.addEventListener("focus",(function(){l(this)})),g.addEventListener("blur",(function(){i(this)}))})))},v=document.querySelector(".task__text-input"),f=document.querySelector(".task__time-input--hours"),p=document.querySelector(".task__time-input--minutes"),g=document.querySelector("ol");let k=document.querySelector("form");const h=function(){k.addEventListener("submit",(()=>{!function(){if(""===v.value||v.value.length<5)return alert("Напишите задание (не меньше 5 символов)"),!1;if(""===f.value||f.value.length<2||f.value.length>2)return alert("Напишите количество часов, 2 символа"),!1;if(""===p.value||p.value.length<2||p.value.length>2)return alert("Напишите количество минут, 2 символа"),!1;if(f.value>23)return alert("Количество часов написано некорректно"),!1;if(p.value>59)return alert("Количество минут написано некорректно"),!1;if(document.querySelector(`input[value="${v.value}"]`))return alert("Такое задание уже существует"),!1;localStorage.setItem("tasks",JSON.stringify([...JSON.parse(localStorage.getItem("tasks")||"[]"),{task:v.value,taskTimeHours:f.value,taskTimeMinutes:p.value,completed:!1}]));const e=document.createElement("li");e.classList.add("li");const a=document.createElement("div");a.classList.add("task"),a.innerHTML=`<input value="${v.value}" class="task-current__text-input">\n    <input class="task-current__time-input--hours" type="number" min="01" max="24" value="${f.value}">\n    <span>:</span>\n    <input class="task-current__time-input--minutes" type="number" min="00" max="59" value="${p.value}">\n    <button class="btn__task-done"><img src="assets/img/check.png"/></button>\n    <button class="btn__task-delete"><img src="assets/img/delete.png"/></button>`,g.insertBefore(e,g.children[0]),e.insertBefore(a,e.children[0]);const s=document.querySelector(".btn__task-done"),d=document.querySelector(".btn__task-delete"),m=document.querySelector(".task-current__text-input"),k=document.querySelector(".task-current__time-input--hours"),h=document.querySelector(".task-current__time-input--minutes");s.addEventListener("click",(function(){s.classList.toggle("completed"),o(this)})),d.addEventListener("click",(function(){c(this)})),m.addEventListener("focus",(function(){t(this)})),m.addEventListener("blur",(function(){n(this)})),k.addEventListener("focus",(function(){r(this)})),k.addEventListener("blur",(function(){u(this)})),h.addEventListener("focus",(function(){l(this)})),h.addEventListener("blur",(function(){i(this)})),v.value=""}()}))};window.addEventListener("DOMContentLoaded",(()=>{m(),h()}))})();